---

# k3s server variables
node_taint:
  - "node-role.kubernetes.io/master=true:NoSchedule"

k3s_control_node: true
k3s_etcd_datastore: true
k3s_use_experimental: true
k3s_server:
  secrets-encryption: true
  disable:
    - servicelb
    - traefik
  tls-san:
    - "{{ kube_vip_address }}"
  node-taint: "{{ node_taint }}"

k3s_server_manifests_urls:
  - url: https://kube-vip.io/manifests/rbac.yaml
    filename: kube-vip-rbac.yaml
  - url: "https://github.com/cert-manager/cert-manager/releases/download/{{ certmanager_version }}/cert-manager.yaml"

k3s_server_manifests_templates:
  - kube-vip.yaml.j2
  - traefik-chart.yaml.j2
  - cert-manager-config.yaml.j2
  - letsencrypt-issuer.yaml.j2
  - traefik-gateway.yaml.j2
  - kubernetes-dashboard-chart.yaml.j2
  - system-httproutes.yaml.j2

kube_vip_version: v0.4.2
kube_vip_interface: kube-vip
kube_vip_address: !vault |
    $ANSIBLE_VAULT;1.1;AES256
    61303837346534633164343566386135386237376538366139383534333638653236323938366437
    6266623665636239656533646134353462653031306566300a613630613034376637386638333830
    36336362616638363730323137656366376338336632646638636565303131383930653736393636
    3731626236326132650a383834373364663637363837633039396132316565643739393164643730
    3565

certmanager_version: v1.7.1

kubernetes_dashboard_version: 5.2.0
